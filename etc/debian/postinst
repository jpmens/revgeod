#!/bin/sh
# postinstall for DEB9
#
# storage belongs to daemon

set -e

case "$1" in
    configure)
        chown -R daemon /var/local/revgeod
        chown daemon /usr/local/etc/default/revgeod
        chmod 640 /usr/local/etc/default/revgeod

	if [ -x /bin/systemctl ]; then
		install -m644 /usr/share/doc/revgeod/revgeod.service /etc/systemd/system/revgeod.service
		systemctl --system daemon-reload || exit 0 # catch failure in docker setup
	fi

	systemctl restart revgeod || exit 0
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
